<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Fish | Florian Oswald</title><link>https://floswald.github.io/tag/fish/</link><atom:link href="https://floswald.github.io/tag/fish/index.xml" rel="self" type="application/rss+xml"/><description>Fish</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>en-us</language><copyright>Â© 2022 Florian Oswald</copyright><lastBuildDate>Wed, 13 Sep 2023 22:54:39 +0200</lastBuildDate><image><url>https://floswald.github.io/media/icon_hu_9d9b593248f3c06d.png</url><title>Fish</title><link>https://floswald.github.io/tag/fish/</link></image><item><title>Create and Rename Files with Fish</title><link>https://floswald.github.io/post/batchrename/</link><pubDate>Wed, 13 Sep 2023 22:54:39 +0200</pubDate><guid>https://floswald.github.io/post/batchrename/</guid><description>&lt;p&gt;I am an avid user of the &lt;a href="https://fishshell.com/" target="_blank" rel="noopener"&gt;fish shell&lt;/a&gt;. Here is a small demo of a common task I have. How to efficiently rename a long list of files in a directory?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# lets create 10 empty text files:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;floswald@PTL11077 ~/test&amp;gt; &lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="o"&gt;(&lt;/span&gt;seq &lt;span class="m"&gt;1&lt;/span&gt; 10&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; touch testfile&lt;span class="nv"&gt;$i&lt;/span&gt;.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; end
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;floswald@PTL11077 ~/test&amp;gt; ls
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;testfile1.txt testfile2.txt testfile4.txt testfile6.txt testfile8.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;testfile10.txt testfile3.txt testfile5.txt testfile7.txt testfile9.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;no suppose I realize that &lt;code&gt;testfile&lt;/code&gt; is actually a poor name for this. I want to call them &lt;code&gt;trainfile&lt;/code&gt; instead. Here is how to change those filenames in batch instead of manually one by one. The concept is called &lt;a href="https://fishshell.com/docs/current/language.html#command-substitution" target="_blank" rel="noopener"&gt;command substition&lt;/a&gt;, as in&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;echo (pwd)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;which evalutes first the command in the bracket before giving it to the &lt;code&gt;echo&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;in our case, we use a &lt;code&gt;sed&lt;/code&gt; call to substitute parts of each filename. &lt;code&gt;sed&lt;/code&gt; is extremeley powerful, look here for a concise &lt;a href="https://www.grymoire.com/Unix/Sed.html" target="_blank" rel="noopener"&gt;manual&lt;/a&gt;. In our case, we want to substitute &lt;code&gt;test&lt;/code&gt; with &lt;code&gt;train&lt;/code&gt;. The &lt;code&gt;s&lt;/code&gt; command in &lt;code&gt;sed&lt;/code&gt; does that. The syntax is &lt;code&gt;s/old/new/&lt;/code&gt;. So we want to substitute &lt;code&gt;test&lt;/code&gt; with &lt;code&gt;train&lt;/code&gt;. We can do that like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;floswald@PTL11077 ~/test &lt;span class="o"&gt;[&lt;/span&gt;64&lt;span class="o"&gt;]&lt;/span&gt;&amp;gt; &lt;span class="k"&gt;for&lt;/span&gt; i in *.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; mv &lt;span class="nv"&gt;$i&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$i&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s/test/train/g&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; end
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;floswald@PTL11077 ~/test&amp;gt; ls
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;trainfile1.txt trainfile2.txt trainfile4.txt trainfile6.txt trainfile8.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;trainfile10.txt trainfile3.txt trainfile5.txt trainfile7.txt trainfile9.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item></channel></rss>